//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "unit10.h"
#include "login.h"
#include "Unit2.h"
#include "baza.h"

#include "Unit5.h"
#include "Unit6.h"
#include "admin.h"
#include "Unit4.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm10 *Form10;
//---------------------------------------------------------------------------
__fastcall TForm10::TForm10(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------

void __fastcall TForm10::SpeedButton1Click(TObject *Sender)
{
 if(Edit2->Text=="0")
  {
	Edit2->Text = ((TSpeedButton * ) Sender)->Caption;
  }
 else
  {
	 Edit2->Text = Edit2->Text + ((TSpeedButton * ) Sender)->Caption;
  }
}
//---------------------------------------------------------------------------

void __fastcall TForm10::SpeedButton26Click(TObject *Sender)
{
  Edit2->Text=((TSpeedButton * ) Sender)->Caption;
}
//---------------------------------------------------------------------------

void __fastcall TForm10::SpeedButton11Click(TObject *Sender)
{
 if(Edit2->Text.Pos(",")==0)
  {
	if(Edit2->Text=="0")
	{
		 Edit2->Text="0,";
	 }
		 else
	{
		 Edit2->Text=Edit2->Text+",";
	}
  }
}
//---------------------------------------------------------------------------


void __fastcall TForm10::SpeedButton31Click(TObject *Sender)
{
 if(DataModule3->ADOQueryzakaz->RecordCount!=0)
 {
	 String id = DataModule3->ADOQueryzakaz->FieldByName("id")->AsString;
	 String holat = DataModule3->ADOQueryzakaz->FieldByName("holat")->AsString;
	 DataModule3->yordamchi->Close();
	 if (holat=="1"){
		DataModule3->yordamchi->SQL->Text = " update zakaz set miqdor = "+Edit2->Text+" where id = "+id+"" ;
	 }
	 else {
		DataModule3->yordamchi->SQL->Text = " update soboy set miqdor = "+Edit2->Text+" where id = "+id+"" ;
	 }
		  DataModule3->yordamchi->ExecSQL();
			DataModule3->ADOQueryzakaz->Active = false;
			DataModule3->ADOQueryzakaz->Active = true;

		Form4->hisobla();
        Close();
 }
}
//---------------------------------------------------------------------------


void __fastcall TForm10::SpeedButton32Click(TObject *Sender)
{

				Close();
}
//---------------------------------------------------------------------------

void __fastcall TForm10::SpeedButton2Click(TObject *Sender)
{
   this->Close();
}
//---------------------------------------------------------------------------
void __fastcall TForm10::SpeedButton25Click(TObject *Sender)
{
	int uz = Edit2->Text.Length();
	if (uz > 0) {
		Edit2->Text = Edit2->Text.Delete(uz,1);
	}

}
//---------------------------------------------------------------------------


void __fastcall TForm10::FormActivate(TObject *Sender)
{
        Edit2->SetFocus() ;
}
//---------------------------------------------------------------------------

void __fastcall TForm10::Edit2KeyDown(TObject *Sender, WORD &Key, TShiftState Shift)

{
	  if (!('0'<=Key && Key <= '9')) {
           Key = '\0';
	  }
}
//---------------------------------------------------------------------------

