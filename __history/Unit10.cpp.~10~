//---------------------------------------------------------------------------

#include <vcl.h>
#pragma hdrstop

#include "unit10.h"
#include "login.h"
#include "Unit2.h"
#include "baza.h"

#include "Unit5.h"
#include "Unit6.h"
#include "admin.h"
#include "Unit4.h"
//---------------------------------------------------------------------------
#pragma package(smart_init)
#pragma resource "*.dfm"
TForm10 *Form10;
//---------------------------------------------------------------------------
__fastcall TForm10::TForm10(TComponent* Owner)
	: TForm(Owner)
{
}
//---------------------------------------------------------------------------

void __fastcall TForm10::SpeedButton1Click(TObject *Sender)
{
 if(Edit2->Text=="0")
  {
	Edit2->Text = ((TSpeedButton * ) Sender)->Caption;
  }
 else
  {
	 Edit2->Text = Edit2->Text + ((TSpeedButton * ) Sender)->Caption;
  }
}
//---------------------------------------------------------------------------

void __fastcall TForm10::SpeedButton26Click(TObject *Sender)
{
  Edit2->Text=((TSpeedButton * ) Sender)->Caption;
}
//---------------------------------------------------------------------------

void __fastcall TForm10::SpeedButton11Click(TObject *Sender)
{
 if(Edit2->Text.Pos(",")==0)
  {
	if(Edit2->Text=="0")
	{
		 Edit2->Text="0,";
	 }
		 else
	{
		 Edit2->Text=Edit2->Text+",";
	}
  }
}
//---------------------------------------------------------------------------





void __fastcall TForm10::SpeedButton2Click(TObject *Sender)
{
   this->Close();
}
//---------------------------------------------------------------------------
void __fastcall TForm10::SpeedButton25Click(TObject *Sender)
{
	int uz = Edit2->Text.Length();
	if (uz > 0) {
		Edit2->Text = Edit2->Text.Delete(uz,1);
	}

}
//---------------------------------------------------------------------------


void __fastcall TForm10::FormActivate(TObject *Sender)
{
        Edit2->SetFocus() ;
}
//---------------------------------------------------------------------------


void __fastcall TForm10::Edit2KeyPress(TObject *Sender, System::WideChar &Key)
{
	   if(Key==13){
			if(db->ADOQueryzakaz->RecordCount!=0){
				String id = db->ADOQueryzakaz->FieldByName("id")->AsString;
				String holat = db->ADOQueryzakaz->FieldByName("holat")->AsString;
				db->yordamchi->Close();
				if (holat=="1")
					 db->yordamchi->SQL->Text = " update zakaz set miqdor = "+Edit2->Text+" where id = "+id+"" ;
				else
					db->yordamchi->SQL->Text = " update soboy set miqdor = "+Edit2->Text+" where id = "+id+"" ;
				db->yordamchi->ExecSQL();
				db->ADOQueryzakaz->Active = false;
				db->ADOQueryzakaz->Active = true;
				Form4->hisobla();
				Close();
			}
	   }
		else if (!('0'<=Key && Key <= '9' || Key == '.' || Key == '\b')) {
           Key = '\0';
  		}
}
//---------------------------------------------------------------------------

